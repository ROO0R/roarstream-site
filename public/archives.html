<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roarstream | Gameplay Archives</title>

  <script>
  // ==============================
  // CUSTOMIZE ME (edit only this)
  // ==============================
  window.ROAR = {
    pageTitle: "Roarstream | Gameplay Archives",
    headline: "Gameplay Archives",
    subtitle:
      "Past Roarstream VODs Going Back More Than a DECADE OMG",

    links: {
      youtube: "https://www.youtube.com/@RoarWuzTaken",
      twitch: "https://www.twitch.tv/RoarWuzTaken",
      discord: "https://discord.gg/Um7k2r7xHg",
      stoat: "https://stt.gg/MXWfzX1w"
    },

    ctas: [
      { label: "See Latest Videos", href: "https://www.youtube.com/@RoarWuzTaken/videos" },
      { label: "Subscribe to Youtube", href: "https://www.youtube.com/@RoarWuzTaken?sub_confirmation=1" }
    ],

    filters: ["All", "RPG", "Horror", "Retro", "Sim", "Weird", "FPS", "Co-op", "Chill", "Point-and-Click", "Spoopy"],

    // ✨ Edit your cards here instead of inside HTML
    playlists: [
     {
        tags: ["Point-and-Click"],
        title: "King's Quest",
        meta: "10 videos • 19h 25m • 2025",
        desc: "The Adventures of Graham, Not Graham, and Everything In-between.",
        url: "https://www.youtube.com/playlist?list=PL89Q3fzM_kU71XmqdMJ0NRskMZPWawnZQ",
        thumb: "https://i.ytimg.com/vi/XKJSFkIXrE4/hqdefault.jpg?sqp=-oaymwE2CPYBEIoBSFXyq4qpAygIARUAAIhCGAFwAcABBvABAfgB_gmAAtAFigIMCAAQARhCIGUoGDAP&rs=AOn4CLAE5_sPH0g8Z22WGYqptO62HOCDhw",
        pills: ["Point-and-Click"],
      },
      {
        tags: ["FPS","Spoopy"],
        title: "Resident Evil Village",
        meta: "4 videos • 11h 27m • 2025",
        desc: "I came for the big lady (heh) and stayed for the Goop.",
        url: "https://www.youtube.com/playlist?list=PL89Q3fzM_kU5V-xJzOjU2K4tP3B_gQy0f",
        thumb: "https://i.ytimg.com/vi/D_4Gg0EWWoE/hqdefault.jpg",
        pills: ["FPS", "Spoopy", "BIG Lady"],
      },
      {
        tags: ["Spoopy"],
        title: "The Void",
        meta: "7 videos • 14h 16m • 2024",
        desc: "don't fear death. there is no death in the void.",
        url: "https://www.youtube.com/playlist?list=PL89Q3fzM_kU7LwMST1PJMI1_csFqMTPYv",
        thumb: "https://i.ytimg.com/vi/ZqH8FU5hqCQ/hqdefault.jpg",
        pills: ["Atmospheric", "Spoopy"],
      },
      {
        tags: ["Adventure"],
        title: "The Wolf Among Us",
        meta: "5 videos • 8hr 7m • 2020",
        desc: "All your favorite gross fairy tales in one gross place.",
        url: "https://www.youtube.com/playlist?list=PL89Q3fzM_kU73XKzl47qjOuvKDrtfIKjW",
        thumb: "https://i.ytimg.com/vi/x45Hg30fYKU/hqdefault.jpg",
        pills: ["Adventure Game"],
      },
      {
        tags: ["retro","challenge"],
        title: "The Tales of Mister Testo",
        meta: "67 videos • 4h 20m • 2025",
        desc: "This is a default template. This is not real.",
        url: "https://www.youtube.com/watch?v=IOyEw9bT8yQ",
        thumb: "https://i.ytimg.com/vi/dQw4w9WgXcQ/hqdefault.jpg",
        pills: ["Retro", { text:"Challenge", good:true }]
      },
    ]
  };
</script>

  <style>
    @font-face {
      font-family: 'Chronotype';
      src: url('Chronotype.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    :root{
      --twitch: #9146FF;
      --twitch2:#b884ff;
      --bg0:#05040a;
      --bg1:#0c0a16;
      --panel:#0f0f18;
      --panel2:#141427;
      --text:#f3f4ff;
      --muted:#b8b9d6;
      --border: rgba(255,255,255,.12);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 18px;

      --card: rgba(255,255,255,.04);
      --card2: rgba(255,255,255,.02);
      --ring: rgba(145,70,255,.45);
      --ring2: rgba(184,132,255,.25);
      --good: rgba(70,255,214,.18);
    }

    *{ box-sizing:border-box; }
    html, body { height:100%; }

    body{
      margin:0;
      color:var(--text);
      font-family: 'Chronotype', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background:
        radial-gradient(1200px 700px at 50% 20%, rgba(145,70,255,.25), transparent 55%),
        radial-gradient(900px 600px at 15% 80%, rgba(70,255,214,.10), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    /* Full-page layout: left art | center panel | right art */
    .stage{
      min-height:100vh;
      display:grid;
      grid-template-columns: minmax(140px, 1fr) minmax(320px, 980px) minmax(140px, 1fr);
      align-items:center;
      gap: 24px;
      padding: 28px 18px;
      position:relative;
    }

    /* Side PNG art panels */
    .side{
      height: clamp(520px, 90vh, 980px);
      border-radius: 26px;
      position:relative;
      overflow:hidden;
      filter: drop-shadow(0 12px 40px rgba(0,0,0,.55));
      opacity:.95;
    }
    .side::before{
      content:"";
      position:absolute;
      inset:0;
      background-size: auto;        /* do NOT scale */
      background-repeat: repeat;    /* tile in both X and Y */
      background-position: top left;
    }
    .side::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55));
      mix-blend-mode: multiply;
    }
    .side.left::before { background-image:url("left-bg.png"); }
    .side.right::before{ background-image:url("right-bg.png"); }

    /* Center content panel */
    main.panel{
      width:100%;
      background: linear-gradient(180deg, rgba(20,20,39,.92), rgba(15,15,24,.92));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(18px, 3vw, 34px);
      position:relative;
      overflow:hidden;
      backdrop-filter: blur(8px);
    }

    /* Decorative glow inside panel */
    main.panel::before{
      content:"";
      position:absolute;
      width: 520px; height: 520px;
      left: -180px; top: -240px;
      background: radial-gradient(circle at 30% 30%, rgba(145,70,255,.35), transparent 60%);
      filter: blur(2px);
      pointer-events:none;
    }
    main.panel::after{
      content:"";
      position:absolute;
      width: 520px; height: 520px;
      right: -220px; bottom: -260px;
      background: radial-gradient(circle at 60% 60%, rgba(184,132,255,.22), transparent 62%);
      filter: blur(2px);
      pointer-events:none;
    }

    .topline{
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      margin-bottom: 10px;
      position:relative;
      z-index:1;
      flex-wrap:wrap;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      font-size: 13px;
      letter-spacing: .08em;
      text-transform: uppercase;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(145,70,255,.35);
      background: rgba(145,70,255,.12);
      color: var(--muted);
      text-decoration:none;
      transition: transform .12s ease, filter .12s ease;
    }
    .badge:hover{ transform: translateY(-1px); filter: saturate(1.05); }
    .badge:focus-visible{
      outline: 3px solid rgba(184,132,255,.85);
      outline-offset: 3px;
    }

    .dot{
      width:8px; height:8px;
      border-radius:999px;
      background: var(--twitch);
      box-shadow: 0 0 18px rgba(145,70,255,.9);
    }

    h1{
      margin: 10px 0 8px;
      font-size: clamp(34px, 4.2vw, 62px);
      line-height: 1.02;
      letter-spacing: -0.02em;
      position:relative;
      z-index:1;
      text-shadow: 0 10px 34px rgba(0,0,0,.55);
      text-align: center;
    }

    .glowtext{
      background: linear-gradient(90deg, #ffffff 0%, #d9c6ff 35%, #b884ff 60%, #ffffff 100%);
      -webkit-background-clip: text;
      background-clip:text;
      color: transparent;
      filter: drop-shadow(0 0 18px rgba(145,70,255,.22));
    }

    .subtitle{
      margin: 0 auto 14px;
      max-width: 70ch;
      text-align:center;
      color: var(--muted);
      opacity: .95;
      line-height: 1.35;
      position:relative;
      z-index:1;
      font-size: 18px;
    }

    .ctaRow{
      display:flex;
      justify-content:center;
      gap: 12px;
      flex-wrap:wrap;
      margin: 12px 0 18px;
      position:relative;
      z-index:1;
    }

    a.cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 12px 16px;
      border-radius: 12px;
      text-decoration:none;
      font-weight: 700;
      font-size: 16px;
      letter-spacing: .01em;
      color: #fff;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(145,70,255,.92), rgba(116,45,235,.92));
      box-shadow: 0 14px 40px rgba(145,70,255,.20);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      white-space: nowrap;
    }
    a.cta:hover{
      transform: translateY(-2px);
      box-shadow: 0 18px 55px rgba(145,70,255,.28);
      filter: saturate(1.05);
    }
    a.cta.secondary{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 14px 46px rgba(0,0,0,.38);
    }
    a.cta.secondary:hover{
      box-shadow: 0 18px 60px rgba(0,0,0,.44);
    }
    a.cta:focus-visible{
      outline: 3px solid rgba(184,132,255,.85);
      outline-offset: 3px;
    }

    .icon{
      width:18px; height:18px;
      display:inline-block;
    }

    /* Filter bar */
    .controls{
      margin-top: 6px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      padding: 12px;
      box-shadow: 0 14px 46px rgba(0,0,0,.40);
      position:relative;
      z-index:1;
    }

    .controlRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .chips{
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items:center;
    }

    .chip{
      appearance:none;
      border: 1px solid rgba(145,70,255,.28);
      background: rgba(145,70,255,.10);
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 999px;
      font-family: inherit;
      letter-spacing: .05em;
      text-transform: uppercase;
      font-size: 12px;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, background .12s ease, filter .12s ease;
    }
    .chip:hover{ transform: translateY(-1px); filter: saturate(1.05); }
    .chip[aria-pressed="true"]{
      color: #fff;
      border-color: rgba(184,132,255,.65);
      background: rgba(184,132,255,.18);
      box-shadow: 0 0 0 3px rgba(145,70,255,.12) inset;
    }
    .chip:focus-visible{
      outline: 3px solid rgba(184,132,255,.85);
      outline-offset: 3px;
    }

    .searchWrap{
      display:flex;
      gap: 8px;
      align-items:center;
      flex: 1 1 260px;
      justify-content:flex-end;
    }

    .search{
      width: min(420px, 100%);
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      color: var(--text);
      font-family: inherit;
      font-size: 16px;
      outline: none;
    }
    .search::placeholder{ color: rgba(184,185,214,.75); }
    .search:focus{
      border-color: rgba(184,132,255,.55);
      box-shadow: 0 0 0 4px rgba(145,70,255,.14);
    }

    .count{
      color: var(--muted);
      font-size: 14px;
      letter-spacing: .02em;
      opacity:.95;
      white-space: nowrap;
    }

    /* Gallery */
    .gallery{
      margin-top: 14px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      position:relative;
      z-index:1;
    }

    @media (max-width: 980px){
      .gallery{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 620px){
      .gallery{ grid-template-columns: 1fr; }
    }

    .card{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, var(--card), var(--card2));
      box-shadow: 0 14px 46px rgba(0,0,0,.40);
      overflow:hidden;
      position:relative;
      transform: translateZ(0);
      transition: transform .14s ease, box-shadow .14s ease, border-color .14s ease;
    }

    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(600px 240px at 10% 0%, rgba(145,70,255,.18), transparent 55%),
                  radial-gradient(520px 260px at 90% 10%, rgba(70,255,214,.08), transparent 55%);
      opacity:.9;
      pointer-events:none;
    }

    .card:hover{
      transform: translateY(-3px);
      border-color: rgba(184,132,255,.35);
      box-shadow: 0 20px 64px rgba(0,0,0,.52);
    }

    .thumb{
      display:block;
      aspect-ratio: 16 / 9;
      width:100%;
      background: rgba(0,0,0,.25);
      position:relative;
      overflow:hidden;
    }
    .thumb img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      filter: saturate(1.02);
      transform: scale(1.01);
      transition: filter .14s ease, transform .14s ease;
    }
    .card:hover .thumb img{
      filter: brightness(1.05) saturate(1.05);
      transform: scale(1.04);
    }

    .pillbar{
      position:absolute;
      left: 10px;
      bottom: 10px;
      display:flex;
      gap: 6px;
      flex-wrap: wrap;
      z-index:2;
    }
    .pill{
      font-size: 11px;
      letter-spacing:.08em;
      text-transform: uppercase;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.35);
      color: rgba(255,255,255,.88);
      backdrop-filter: blur(6px);
    }
    .pill.good{
      border-color: rgba(70,255,214,.26);
      background: rgba(70,255,214,.10);
    }

    .content{
      padding: 12px 12px 14px;
      position:relative;
      z-index:1;
    }

    .titleRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }

    .card h3{
      margin: 0;
      font-size: 20px;
      letter-spacing: -0.01em;
      line-height: 1.15;
    }

    .meta{
      margin: 6px 0 8px;
      color: var(--muted);
      font-size: 14px;
      opacity:.95;
      letter-spacing: .01em;
    }

    .desc{
      margin: 0 0 12px;
      color: rgba(243,244,255,.92);
      opacity: .90;
      line-height: 1.3;
      font-size: 15px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow:hidden;
      min-height: 2.6em;
    }

    .cardActions{
      display:flex;
      gap: 10px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }

    a.watch{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      text-decoration:none;
      font-weight: 800;
      font-size: 15px;
      color:#fff;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(145,70,255,.88), rgba(116,45,235,.88));
      box-shadow: 0 14px 40px rgba(145,70,255,.16);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
    }
    a.watch:hover{
      transform: translateY(-2px);
      box-shadow: 0 18px 55px rgba(145,70,255,.24);
      filter: saturate(1.05);
    }
    a.watch:focus-visible{
      outline: 3px solid rgba(184,132,255,.85);
      outline-offset: 3px;
    }

    a.smallLink{
      color: var(--muted);
      text-decoration:none;
      font-size: 14px;
      border-bottom: 1px dashed rgba(184,185,214,.35);
      padding-bottom: 1px;
      opacity:.95;
    }
    a.smallLink:hover{ color:#fff; border-bottom-color: rgba(255,255,255,.35); }
    a.smallLink:focus-visible{
      outline: 3px solid rgba(184,132,255,.85);
      outline-offset: 3px;
      border-bottom-color: transparent;
    }

    /* Footer */
    footer{
      margin-top: 18px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,.10);
      color: rgba(184,185,214,.95);
      position:relative;
      z-index:1;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex-wrap:wrap;
      font-size: 14px;
      letter-spacing: .01em;
    }
    .footlinks{
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items:center;
    }

    /* Responsive: hide side art on smaller screens */
    @media (max-width: 980px){
      .stage{
        grid-template-columns: 1fr;
        gap: 16px;
        padding: 18px 14px;
      }
      .side{ display:none; }
      main.panel{
        max-width: 980px;
        margin: 0 auto;
        text-align: center;
      }
      .controlRow{ justify-content:center; }
      .searchWrap{ justify-content:center; }
      footer{ justify-content:center; }
    }

    @media (max-height: 680px){
      .stage{
        align-items: start;
        padding-top: 18px;
        padding-bottom: 28px;
      }
    }
  </style>
</head>

<body>
  <div class="stage">
    <div class="side left" aria-hidden="true"></div>

    <main class="panel" role="main">
      <div class="topline" aria-label="Social links">
        <a class="badge" href="https://www.youtube.com/@RoarWuzTaken" target="_blank" rel="noopener noreferrer">
          <span class="dot"></span> YouTube
        </a>

        <a class="badge" href="https://www.twitch.tv/RoarWuzTaken" target="_blank" rel="noopener noreferrer">
          <span class="dot"></span> Twitch
        </a>

        <a class="badge" href="https://discord.gg/Um7k2r7xHg" target="_blank" rel="noopener noreferrer">
          <span class="dot"></span> Discord
        </a>

        <a class="badge" href="https://stt.gg/MXWfzX1w" target="_blank" rel="noopener noreferrer">
          <span class="dot"></span> Stoat
        </a>
      </div>

      <h1 id="headline" class="glowtext"></h1>
      <p id="subtitle" class="subtitle"></p>

      <div class="ctaRow" aria-label="Primary actions">
        <a class="cta" href="https://www.youtube.com/@RoarWuzTaken/videos" target="_blank" rel="noopener noreferrer">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10 15l5-3-5-3v6z" stroke="white" stroke-width="1.6" stroke-linejoin="round"/>
            <path d="M21 12c0 4.5-1 6-9 6S3 16.5 3 12 4 6 12 6s9 1.5 9 6z" stroke="white" stroke-opacity=".9" stroke-width="1.6"/>
          </svg>
          Latest Uploads
        </a>
        <a class="cta secondary" href="https://www.youtube.com/@RoarWuzTaken?sub_confirmation=1" target="_blank" rel="noopener noreferrer">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 3v18" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
            <path d="M3 12h18" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
          Subscribe
        </a>
      </div>

      <!-- Filters + Search -->
      <section class="controls" aria-label="Playlist filters">
        <div class="controlRow">
          <div class="chips" aria-label="Category filters">
            <button class="chip" type="button" data-filter="all" aria-pressed="true">All</button>
            <button class="chip" type="button" data-filter="point-and-click" aria-pressed="false">Point-and-Click</button>
            <button class="chip" type="button" data-filter="spoopy" aria-pressed="false">Spoopy</button>
            <button class="chip" type="button" data-filter="spoopy" aria-pressed="false">Adventure Game</button>
            <button class="chip" type="button" data-filter="spoopy" aria-pressed="false">Retro</button>
          </div>

          <div class="searchWrap">
            <input id="search" class="search" type="search" placeholder="Search playlists (title, game, tags)..." aria-label="Search playlists" />
            <div id="count" class="count" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <section class="gallery" id="gallery" aria-label="Playlist gallery"></section>

      <footer aria-label="Footer">
        <div>© Roarstream • VODs &amp; playlists</div>
        <div class="footlinks">
          <a class="smallLink" href="https://www.youtube.com/@RoarWuzTaken" target="_blank" rel="noopener noreferrer">YouTube</a>
          <a class="smallLink" href="https://www.twitch.tv/RoarWuzTaken" target="_blank" rel="noopener noreferrer">Twitch</a>
          <a class="smallLink" href="https://discord.gg/Um7k2r7xHg" target="_blank" rel="noopener noreferrer">Discord</a>
        </div>
      </footer>
    </main>

    <div class="side right" aria-hidden="true"></div>
  </div>

  <script>
  const cfg = window.ROAR;

  // Page title (browser tab)
  if (cfg?.pageTitle) document.title = cfg.pageTitle;

  // Headline/subtitle
  document.getElementById("headline").textContent = cfg.headline || "";
  document.getElementById("subtitle").textContent = cfg.subtitle || "";

  // Build playlist cards
  const gallery = document.getElementById("gallery");

  function escapeHTML(s){
    const str = (s ?? "").toString();
    // replaceAll is fine in modern browsers, but this is safer everywhere
    return str
      .replace(/&/g,"&amp;")
      .replace(/</g,"&lt;")
      .replace(/>/g,"&gt;")
      .replace(/"/g,"&quot;")
      .replace(/'/g,"&#39;");
  }

  function pillHTML(p){
    if (typeof p === "string") return `<span class="pill">${escapeHTML(p)}</span>`;
    const cls = p && p.good ? "pill good" : "pill";
    return `<span class="${cls}">${escapeHTML(p?.text || "")}</span>`;
  }

  function cardHTML(item){
    // Normalize tags for filtering: store them lowercased in data-tags
    const tagsArr = Array.isArray(item.tags) ? item.tags : [];
    const tagsNorm = tagsArr.map(t => (t || "").toString().toLowerCase().trim()).filter(Boolean);
    const tagsAttr = tagsNorm.join(" ");

    const pills = (item.pills || []).map(pillHTML).join("");
    const title = escapeHTML(item.title || "");
    const meta  = escapeHTML(item.meta || "");
    const desc  = escapeHTML(item.desc || "");
    const url   = escapeHTML(item.url || "#");
    const thumb = escapeHTML(item.thumb || "");

    return `
      <article class="card" data-tags="${escapeHTML(tagsAttr)}">
        <a class="thumb" href="${url}" target="_blank" rel="noopener noreferrer"
           aria-label="Open playlist: ${title}">
          <img src="${thumb}" alt="Thumbnail for ${title} playlist" loading="lazy">
          <div class="pillbar" aria-hidden="true">${pills}</div>
        </a>
        <div class="content">
          <div class="titleRow"><h3>${title}</h3></div>
          <div class="meta">${meta}</div>
          <p class="desc">${desc}</p>
          <div class="cardActions">
            <a class="watch" href="${url}" target="_blank" rel="noopener noreferrer">Watch Playlist</a>
            <a class="smallLink" href="${url}" target="_blank" rel="noopener noreferrer">Playlist link</a>
          </div>
        </div>
      </article>
    `;
  }

  // Render all cards
  const cardsData = Array.isArray(cfg?.playlists) ? cfg.playlists : [];
  gallery.innerHTML = cardsData.map(cardHTML).join("");

  // Hook up filter + search
  const chips = Array.from(document.querySelectorAll(".chip"));
  const search = document.getElementById("search");
  const count = document.getElementById("count");

  let cards = Array.from(document.querySelectorAll(".card"));
  let activeFilter = "all";

  function normalize(s){ return (s || "").toLowerCase().trim(); }

  function cardText(card){
    const title = card.querySelector("h3")?.textContent || "";
    const meta  = card.querySelector(".meta")?.textContent || "";
    const desc  = card.querySelector(".desc")?.textContent || "";
    const tags  = card.getAttribute("data-tags") || "";
    return normalize([title, meta, desc, tags].join(" "));
  }

  function matchesFilter(card){
    if (activeFilter === "all") return true;
    const tags = (card.getAttribute("data-tags") || "")
      .split(/\s+/)
      .map(normalize)
      .filter(Boolean);
    return tags.includes(activeFilter);
  }

  function matchesSearch(card){
    const q = normalize(search.value);
    if (!q) return true;
    return cardText(card).includes(q);
  }

  function apply(){
    let visible = 0;
    for (const card of cards){
      const ok = matchesFilter(card) && matchesSearch(card);
      card.style.display = ok ? "" : "none";
      if (ok) visible++;
    }
    count.textContent = `${visible} playlist${visible === 1 ? "" : "s"}`;
  }

  chips.forEach(btn => {
    btn.addEventListener("click", () => {
      chips.forEach(b => b.setAttribute("aria-pressed", "false"));
      btn.setAttribute("aria-pressed", "true");
      activeFilter = normalize(btn.getAttribute("data-filter") || "all");
      apply();
    });
  });

  search.addEventListener("input", apply);
  apply();
</script>
</body>
</html>
