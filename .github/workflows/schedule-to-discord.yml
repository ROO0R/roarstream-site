name: Post schedule.png to Discord

on:
  push:
    paths:
      - "public/schedule.png"

jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Debug - show files
        run: |
          echo "Listing public/:"
          ls -la public || true
          echo "Git status:"
          git status --porcelain || true

      - name: Send schedule.png to Discord webhook
        env:
          WEBHOOK: ${{ secrets.WIL0W }}
        run: |
          test -f public/schedule.png
          curl -v -X POST "$WEBHOOK" \
            -F "content=üóìÔ∏è Schedule updated! (from GitHub Actions)" \
            -F "file=@public/schedule.png;filename=schedule.png"
